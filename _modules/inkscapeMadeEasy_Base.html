<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>inkscapeMadeEasy_Base &mdash; inkscapeMadeEasy 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/style.css?v=ab210c7a" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            inkscapeMadeEasy
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Main Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mainFeatures.html">Optional LaTeX support via textext extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainFeatures.html#scientific-plotting-system">Scientific plotting system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainFeatures.html#control-over-text-styles-line-markers-and-other-drawing-features">Control over text styles, line markers and other drawing features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mainFeatures.html#useful-backstage-functions">Useful backstage functions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Inkscape Version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html#requirements">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html#installation-procedure-v1-0-only">Installation procedure (v1.0 only)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html#disabling-latex-support">Disabling LaTeX support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General gist and minimal example</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../minimalExample.html">General Gist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../minimalExample.html#minimal-example">Minimal example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Module Definitions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../moduleDefinitions.html">inkscapeMadeEasy_Base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../moduleDefinitions.html#inkscapemadeeasy-draw">inkscapeMadeEasy_Draw</a></li>
<li class="toctree-l1"><a class="reference internal" href="../moduleDefinitions.html#inkscapemadeeasy-plot">inkscapeMadeEasy_Plot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Index</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">inkscapeMadeEasy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">inkscapeMadeEasy_Base</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for inkscapeMadeEasy_Base</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/python</span>

<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="c1">#</span>
<span class="c1">#    inkscapeMadeEasy: - Helper module that extends Aaron Spike&#39;s inkex.py module,</span>
<span class="c1">#                        focusing productivity in inkscape extension development</span>
<span class="c1">#</span>
<span class="c1">#    Copyright (C) 2016 by Fernando Moura</span>
<span class="c1">#</span>
<span class="c1">#    This program is free software: you can redistribute it and/or modify</span>
<span class="c1">#    it under the terms of the GNU General Public License as published by</span>
<span class="c1">#    the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1">#    (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1">#    This program is distributed in the hope that it will be useful,</span>
<span class="c1">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1">#    GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1">#    You should have received a copy of the GNU General Public License</span>
<span class="c1">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">#</span>
<span class="c1"># -----------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">lxml</span> <span class="kn">import</span> <span class="n">etree</span>

<span class="kn">import</span> <span class="nn">inkex</span>


<div class="viewcode-block" id="inkscapeMadeEasy">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy">[docs]</a>
<span class="k">class</span> <span class="nc">inkscapeMadeEasy</span><span class="p">(</span><span class="n">inkex</span><span class="o">.</span><span class="n">Effect</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inkex</span><span class="o">.</span><span class="n">Effect</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inkscapeResolution_dpi</span> <span class="o">=</span> <span class="mf">96.0</span>  <span class="c1"># number of pixels per inch</span>

        <span class="n">resolution_in</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inkscapeResolution_dpi</span>
        <span class="n">resolution_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inkscapeResolution_dpi</span> <span class="o">/</span> <span class="mf">25.4</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">unitsDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mm&#39;</span><span class="p">:</span> <span class="n">resolution_mm</span><span class="p">,</span>  <span class="c1"># 25.4mm per inch</span>
                          <span class="s1">&#39;cm&#39;</span><span class="p">:</span> <span class="n">resolution_mm</span> <span class="o">*</span> <span class="mf">10.0</span><span class="p">,</span>  <span class="c1"># 1cm = 10mm</span>
                          <span class="s1">&#39;m&#39;</span><span class="p">:</span> <span class="n">resolution_mm</span> <span class="o">*</span> <span class="mf">1.0e3</span><span class="p">,</span>  <span class="c1"># 1m = 1000mm</span>
                          <span class="s1">&#39;km&#39;</span><span class="p">:</span> <span class="n">resolution_mm</span> <span class="o">*</span> <span class="mf">1.0e6</span><span class="p">,</span>  <span class="c1"># 1km = 1e6mm</span>
                          <span class="s1">&#39;in&#39;</span><span class="p">:</span> <span class="n">resolution_in</span><span class="p">,</span>  <span class="c1"># 1in = 96px</span>
                          <span class="s1">&#39;ft&#39;</span><span class="p">:</span> <span class="n">resolution_in</span> <span class="o">*</span> <span class="mf">12.0</span><span class="p">,</span>  <span class="c1"># foot = 12*in</span>
                          <span class="s1">&#39;yd&#39;</span><span class="p">:</span> <span class="n">resolution_in</span> <span class="o">*</span> <span class="mf">12.0</span> <span class="o">*</span> <span class="mf">3.0</span><span class="p">,</span>  <span class="c1"># yard = 3*ft</span>
                          <span class="s1">&#39;pt&#39;</span><span class="p">:</span> <span class="n">resolution_in</span> <span class="o">/</span> <span class="mf">72.0</span><span class="p">,</span>  <span class="c1"># point 1pt = 1/72th of an inch</span>
                          <span class="s1">&#39;px&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s1">&#39;pc&#39;</span><span class="p">:</span> <span class="n">resolution_in</span> <span class="o">/</span> <span class="mf">6.0</span><span class="p">}</span>  <span class="c1"># picas	1pc = 1/6th of and inch</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">blankSVG</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span>
<span class="s2">    &lt;svg</span>
<span class="s2">       xmlns:dc=&quot;http://purl.org/dc/elements/1.1/&quot;</span>
<span class="s2">       xmlns:cc=&quot;http://creativecommons.org/ns#&quot;</span>
<span class="s2">       xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span>
<span class="s2">       xmlns:svg=&quot;http://www.w3.org/2000/svg&quot;</span>
<span class="s2">       xmlns=&quot;http://www.w3.org/2000/svg&quot;</span>
<span class="s2">       xmlns:sodipodi=&quot;http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd&quot;</span>
<span class="s2">       xmlns:inkscape=&quot;http://www.inkscape.org/namespaces/inkscape&quot;</span>
<span class="s2">       width=&quot;400mm&quot;</span>
<span class="s2">       height=&quot;297mm&quot;</span>
<span class="s2">       viewBox=&quot;0 0 1511.8111 1122.5197&quot;</span>
<span class="s2">       version=&quot;1.1&quot;</span>
<span class="s2">       id=&quot;svg878&quot;</span>
<span class="s2">       inkscape:version=&quot;1.0.1 (1.0.1+r73)&quot;</span>
<span class="s2">       sodipodi:docname=&quot;blank.svg&quot;&gt;</span>
<span class="s2">      &lt;defs</span>
<span class="s2">         id=&quot;defs872&quot; /&gt;</span>
<span class="s2">      &lt;sodipodi:namedview</span>
<span class="s2">         id=&quot;base&quot;</span>
<span class="s2">         pagecolor=&quot;#ffffff&quot;</span>
<span class="s2">         bordercolor=&quot;#666666&quot;</span>
<span class="s2">         borderopacity=&quot;1.0&quot;</span>
<span class="s2">         inkscape:pageopacity=&quot;0.0&quot;</span>
<span class="s2">         inkscape:pageshadow=&quot;2&quot;</span>
<span class="s2">         inkscape:zoom=&quot;0.35&quot;</span>
<span class="s2">         inkscape:cx=&quot;400&quot;</span>
<span class="s2">         inkscape:cy=&quot;560&quot;</span>
<span class="s2">         inkscape:document-units=&quot;px&quot;</span>
<span class="s2">         inkscape:current-layer=&quot;layer1&quot;</span>
<span class="s2">         inkscape:document-rotation=&quot;0&quot;</span>
<span class="s2">         showgrid=&quot;false&quot;</span>
<span class="s2">         units=&quot;px&quot;</span>
<span class="s2">         inkscape:window-width=&quot;1347&quot;</span>
<span class="s2">         inkscape:window-height=&quot;850&quot;</span>
<span class="s2">         inkscape:window-x=&quot;569&quot;</span>
<span class="s2">         inkscape:window-y=&quot;202&quot;</span>
<span class="s2">         inkscape:window-maximized=&quot;0&quot; /&gt;</span>
<span class="s2">      &lt;metadata</span>
<span class="s2">         id=&quot;metadata875&quot;&gt;</span>
<span class="s2">        &lt;rdf:RDF&gt;</span>
<span class="s2">          &lt;cc:Work</span>
<span class="s2">             rdf:about=&quot;&quot;&gt;</span>
<span class="s2">            &lt;dc:format&gt;image/svg+xml&lt;/dc:format&gt;</span>
<span class="s2">            &lt;dc:type</span>
<span class="s2">               rdf:resource=&quot;http://purl.org/dc/dcmitype/StillImage&quot; /&gt;</span>
<span class="s2">            &lt;dc:title&gt;&lt;/dc:title&gt;</span>
<span class="s2">          &lt;/cc:Work&gt;</span>
<span class="s2">        &lt;/rdf:RDF&gt;</span>
<span class="s2">      &lt;/metadata&gt;</span>
<span class="s2">      &lt;g</span>
<span class="s2">         inkscape:label=&quot;Layer 1&quot;</span>
<span class="s2">         inkscape:groupmode=&quot;layer&quot;</span>
<span class="s2">         id=&quot;layer1&quot; /&gt;</span>
<span class="s2">    &lt;/svg&gt;</span>
<span class="s2">        &quot;&quot;&quot;</span>
    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.bool">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.bool">[docs]</a>
    <span class="k">def</span> <span class="nf">bool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">valueStr</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ArgParser function to turn a boolean string into a python boolean</span>

<span class="sd">        :param valueStr: string representing a boolean. Valid values: &#39;true&#39;,&#39;false&#39; with any letter capitalization</span>
<span class="sd">        :type valueStr: string</span>

<span class="sd">        :returns: boolean value</span>
<span class="sd">        :rtype: bool</span>

<span class="sd">        .. note:: This function was copied from inkex.utils.py to avoid having to import inkex.py in your project just to use inkex.Boolean in ``arg_parser.add_argument``. You can pass this function in ``arg_parser.add_argument`` method when dealing with boolean values. See :ref:`minimalExample` section for a good example.</span>

<span class="sd">        **Example**</span>

<span class="sd">        In your ``__init__`` function, ``arg_parser.add_argument`` requires a callable to convert string to bool when dealing with bool variables. See :ref:`minimalExample` section for a good example.</span>

<span class="sd">        &gt;&gt;&gt; self.arg_parser.add_argument(&quot;--boolVariable&quot;, type=self.bool, dest=&quot;boolVariable&quot;, default=False)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">valueStr</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TRUE&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">valueStr</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;FALSE&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">None</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.displayMsg">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.displayMsg">[docs]</a>
    <span class="k">def</span> <span class="nf">displayMsg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Display a message to the user.</span>

<span class="sd">        :param msg: message</span>
<span class="sd">        :type msg: string</span>
<span class="sd">        </span>
<span class="sd">        :returns: nothing</span>
<span class="sd">        :rtype: -</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="inkscapeMadeEasy.createEmptySVG">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.createEmptySVG">[docs]</a>
    <span class="k">def</span> <span class="nf">createEmptySVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates an empty svg file.</span>

<span class="sd">        .. note:: The empty file does not replace the current opened document</span>

<span class="sd">        :param fileName: valid filename and path</span>
<span class="sd">        :type .. note:: This function was c: string</span>

<span class="sd">        :returns: nothing</span>
<span class="sd">        :rtype: -</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blankSVG</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">))</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getBasicLatexPackagesFile">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getBasicLatexPackagesFile">[docs]</a>
    <span class="k">def</span> <span class="nf">getBasicLatexPackagesFile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the full path  of the ``basicLatexPackages.tex`` file with commonly used Latex packages</span>

<span class="sd">        The default contents of the ``basicLatexPackages.tex`` is::</span>

<span class="sd">        \\usepackage{amsmath,amsthm,amsbsy,amsfonts,amssymb}</span>
<span class="sd">        \\usepackage[per=slash]{siunitx}</span>
<span class="sd">        \\usepackage{steinmetz}</span>

<span class="sd">        :returns:  Full path  of the file with commonly used Latex packages </span>
<span class="sd">        :rtype: string</span>

<span class="sd">        .. note:: You can add other packages to the file ``basicLatexPackages.tex``.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">directory</span> <span class="o">+</span> <span class="s1">&#39;/../inkscapeMadeEasy/basicLatexPackages.tex&#39;</span><span class="p">)</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.Dump">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.Dump">[docs]</a>
    <span class="k">def</span> <span class="nf">Dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="s1">&#39;./dump_file.txt&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function to easily output the result of ``str(obj)`` to a file</span>

<span class="sd">        :param obj: python object to sent to a file. Any object can be used, as long as ``str(obj)`` is implemented (see ``__str__()`` metaclass definition of your object)</span>
<span class="sd">        :param file: file path. Default: ``./dump_file.txt``</span>
<span class="sd">        :param mode: writing mode of the file Default: ``w`` (write)</span>
<span class="sd">        :type obj: any</span>
<span class="sd">        :type file: string</span>
<span class="sd">        :type mode: string</span>
<span class="sd">        :returns:  nothing</span>
<span class="sd">        :rtype: -</span>

<span class="sd">        .. note:: This function was created to help debugging the code while it is running under inkscape. Since inkscape does not possess a terminal as today (2016), this function overcomes partially the issue of sending things to stdout by dumping result of the function ``str(obj)`` in a text file.</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; vector1=[1,2,3,4,5,6]</span>
<span class="sd">        &gt;&gt;&gt; self.Dump(vector1,file=&#39;~/temporary.txt&#39;,mode=&#39;w&#39;)   # writes the list to a file</span>
<span class="sd">        &gt;&gt;&gt; vector2=[7,8,9,10]</span>
<span class="sd">        &gt;&gt;&gt; self.Dump(vector2,file=&#39;~/temporary.txt&#39;,mode=&#39;a&#39;)   # append the list to a file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.removeElement">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.removeElement">[docs]</a>
    <span class="k">def</span> <span class="nf">removeElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove one element (can be a group) of the document.</span>

<span class="sd">        If the parent of the removed element is a group and has no other children, then the parent group is also removed.</span>

<span class="sd">        :param element: inkscape element object to be removed. If the element is a group, then all its chidren are also removed.</span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :returns:  nothing</span>
<span class="sd">        :rtype: -</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                              # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; groupA = self.createGroup(rootLayer,label=&#39;temp&#39;)                # creates a group inside rootLayer</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(groupA, [[5,0]],[0,0])       # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; line2 = inkDraw.line.relCoords(rootLayer, [[5,0]],[0,0])    # creates a line in rootLayer</span>
<span class="sd">        &gt;&gt;&gt; line3 = inkDraw.line.relCoords(groupA, [[15,0]],[10,0])     # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; self.removeElement(line1)                                         # removes line 1</span>
<span class="sd">        &gt;&gt;&gt; self.removeElement(line2)                                         # removes line 2</span>
<span class="sd">        &gt;&gt;&gt; self.removeElement(line3)                                         # removes line 3. Also removes groupA since this group has no other children</span>
<span class="sd">        &gt;&gt;&gt; groupB = self.createGroup(rootLayer,label=&#39;temp1&#39;)                # creates a group inside rootLayer</span>
<span class="sd">        &gt;&gt;&gt; line4 = inkDraw.line.relCoords(groupB, [[5,0]],[0,0])       # creates a line in groupB</span>
<span class="sd">        &gt;&gt;&gt; self.removeElement(groupB)                                        # removes group B and all its children</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">parent</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">getparent</span><span class="p">()</span>

        <span class="n">parent</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;g&#39;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="o">.</span><span class="n">getchildren</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># if object&#39;s parent is a group and has no other children, remove parent too</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">getparent</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">temp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.importSVG">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.importSVG">[docs]</a>
    <span class="k">def</span> <span class="nf">importSVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">fileIn</span><span class="p">,</span> <span class="n">createGroup</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">scaleFactor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">unifyDefs</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Import SVG file into the current document</span>

<span class="sd">        :param parent: parent element where all contents will be placed</span>
<span class="sd">        :param fileIn: SVG file path</span>
<span class="sd">        :param createGroup: create a group containing all imported elements. (Default: True)</span>
<span class="sd">        :param position: set center position of the group. Used only if createGroup=True  (Default: None)</span>
<span class="sd">        :param scaleFactor: set scaling factor of the group. Used only if createGroup=True  (Default: 1.0)</span>
<span class="sd">        :param unifyDefs: unify the defs node via :meth:`unifyDefs`. (Default: False)</span>
<span class="sd">        :type parent: inkscape element object</span>
<span class="sd">        :type fileIn: string</span>
<span class="sd">        :type createGroup: bool</span>
<span class="sd">        :type unifyDefs: bool</span>
<span class="sd">        :returns:  imported element objects. If createGroup==True, returns the group. Otherwise returns a list with all imported elements</span>
<span class="sd">        :rtype: inkscape element object or list of objects</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                              # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; imported1 = self.importSVG(rootLayer,&#39;/path/to/file1.svg&#39;,True)  # import contents of the file and group them. imported1 is the group element</span>
<span class="sd">        &gt;&gt;&gt; imported2 = self.importSVG(rootLayer,&#39;/path/to/file2.svg&#39;,False) # import contents of the file. imported2 is a list of the imported elements</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">documentIn</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">fileIn</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="n">etree</span><span class="o">.</span><span class="n">XMLParser</span><span class="p">(</span><span class="n">huge_tree</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">createGroup</span><span class="p">:</span>
            <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createGroup</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;importedSVG&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">documentIn</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;namedview&#39;</span><span class="p">,</span> <span class="s1">&#39;sodipodi&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">):</span>
                    <span class="n">group</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">unifyDefs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unifyDefs</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCenter</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">moveElement</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">position</span><span class="o">-</span><span class="n">center</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">scaleFactor</span> <span class="o">!=</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scaleElement</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">scaleX</span><span class="o">=</span><span class="n">scaleFactor</span><span class="p">,</span> <span class="n">scaleY</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getCenter</span><span class="p">(</span><span class="n">group</span><span class="p">))</span>

            <span class="k">return</span> <span class="n">group</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">listElements</span><span class="o">=</span><span class="p">[]</span>
            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">documentIn</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;namedview&#39;</span><span class="p">,</span> <span class="s1">&#39;sodipodi&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">):</span>
                    <span class="n">parent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;defs&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">):</span>
                        <span class="n">listElements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">unifyDefs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unifyDefs</span><span class="p">()</span>

            <span class="k">return</span> <span class="n">listElements</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.exportSVG">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.exportSVG">[docs]</a>
    <span class="k">def</span> <span class="nf">exportSVG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">fileOut</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Export the element (or list of elements) in a new svgfile.</span>

<span class="sd">        This function will export the element (or list of elements) to a new SVG file. If a list of elements is passed as argument, all elements in the list will be exported to the same file.</span>

<span class="sd">        :param element: element or list of elements to be exported</span>
<span class="sd">        :param fileOut: file path, including the extension.</span>
<span class="sd">        :type element: inkscape element object or list of inkscape element objects</span>
<span class="sd">        :type file: string</span>
<span class="sd">        :returns:  nothing</span>
<span class="sd">        :rtype: -</span>

<span class="sd">        .. note:: Currently (2020), all the defs of the original file will be copied to the new file. Therefore you might want to run the vacuum tool to cleanup the new SVG file ``File &gt; Clean um document``</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                          # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; groupA = self.createGroup(rootLayer,label=&#39;temp&#39;)            # creates a group inside rootLayer</span>
<span class="sd">        &gt;&gt;&gt; groupB = self.createGroup(rootLayer,label=&#39;child&#39;)           # creates a group inside groupA</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(groupA, [[10,0]],[0,0])       # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; line2 = inkDraw.line.relCoords(groupB, [[20,0]],[0,0])       # creates a line in groupB</span>
<span class="sd">        &gt;&gt;&gt; self.exportSVG(line1,&#39;path/to/file1.svg&#39;)                    # exports only line1</span>
<span class="sd">        &gt;&gt;&gt; self.exportSVG(groupA,&#39;path/to/file2.svg&#39;)                   # exports groupA (and all elements it contais)</span>
<span class="sd">        &gt;&gt;&gt; self.exportSVG([groupA,groupB],&#39;path/to/file3.svg&#39;)          # exports groupA and groupB (and all elements they contain) to the same file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">document</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blankSVG</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">))</span>

        <span class="n">elem_tmp</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="c1"># add definitions</span>
        <span class="n">defs_tmp</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDefinitions</span><span class="p">())</span>
        <span class="n">document</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">defs_tmp</span><span class="p">)</span>

        <span class="c1"># add elements</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">elem_tmp</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elem_tmp</span><span class="p">:</span>
                <span class="n">document</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">document</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem_tmp</span><span class="p">)</span>

        <span class="n">et</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">ElementTree</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
        <span class="n">et</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fileOut</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.uniqueIdNumber">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.uniqueIdNumber">[docs]</a>
    <span class="k">def</span> <span class="nf">uniqueIdNumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Generate an unique element ID number with a given prefix ID by adding a numeric suffix</span>

<span class="sd">        This function is used to generate a valid unique ID by concatenating a given prefix with a numeric suffix. The overall format is ``prefix-%05d``.</span>

<span class="sd">        This function makes sure the ID is unique by checking in ``doc_ids`` member. This function is specially useful for creating an unique ID for markers and other elements in defs.</span>

<span class="sd">        :param prefix_id: prefix of the ID</span>
<span class="sd">        :type prefix_id: string</span>
<span class="sd">        :returns: the unique ID</span>
<span class="sd">        :rtype: string</span>

<span class="sd">        .. note:: This function has been adapted from inkex.py. However it uses an incremental number method</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; a=self.uniqueIdNumber(&#39;myName&#39;)    # a=myName-00001</span>
<span class="sd">        &gt;&gt;&gt; b=self.uniqueIdNumber(&#39;myName&#39;)    # b=myName-00002, because myName-00001 is already in use</span>
<span class="sd">        &gt;&gt;&gt; c=self.uniqueIdNumber(&#39;myName&#39;)    # c=myName-00003, because myName-00001 and myName-00002 are already in use</span>
<span class="sd">        &gt;&gt;&gt; d=self.uniqueIdNumber(&#39;myNameX&#39;)   # d=myNameX-00001</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">numberID</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">new_id</span> <span class="o">=</span> <span class="n">prefix_id</span> <span class="o">+</span> <span class="s1">&#39;-</span><span class="si">%05d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">numberID</span>
        <span class="k">while</span> <span class="n">new_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ids</span><span class="p">():</span>
            <span class="n">numberID</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">new_id</span> <span class="o">=</span> <span class="n">prefix_id</span> <span class="o">+</span> <span class="s1">&#39;-</span><span class="si">%05d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">numberID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">get_ids</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">new_id</span></div>



        <span class="c1"># add an unique id to the elements</span>
        <span class="c1">#for tag in svg.iter():</span>
        <span class="c1">#    if &#39;id&#39; not in tag.attrib:</span>
        <span class="c1">#        newID=self.svg.get_unique_id( prefix=&#39;imported_&#39;, size=None)</span>
        <span class="c1">#        tag.attrib[&#39;id&#39;]=newID</span>



    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getDefinitions">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getDefinitions">[docs]</a>
    <span class="k">def</span> <span class="nf">getDefinitions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Return the &lt;defs&gt; element of the svg file.</span>

<span class="sd">        This function returns the principal &lt;defs&gt; element of the current svg file.</span>

<span class="sd">        if no &lt;defs&gt; can be found, a new empty &lt;defs&gt; is created</span>

<span class="sd">        :returns: the defs element</span>
<span class="sd">        :rtype: inkscape element object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">defs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemFromXpath</span><span class="p">(</span><span class="s1">&#39;/svg:svg//svg:defs&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">defs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">defs</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">document</span><span class="o">.</span><span class="n">getroot</span><span class="p">(),</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;defs&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">defs</span></div>


<div class="viewcode-block" id="inkscapeMadeEasy.cleanDefs">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.cleanDefs">[docs]</a>
    <span class="k">def</span> <span class="nf">cleanDefs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">removeUnused</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unifyDuplicates</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">checkEquality</span><span class="p">(</span><span class="n">elemA</span><span class="p">,</span><span class="n">elemB</span><span class="p">):</span>
            <span class="c1"># check equality between two elements. do it recursively</span>
            <span class="c1"># https://stackoverflow.com/questions/7905380/testing-equivalence-of-xml-etree-elementtree</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elemA</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">elemB</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="n">elemA</span><span class="o">.</span><span class="n">text</span> <span class="o">!=</span> <span class="n">elemB</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">elemA</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">valA</span><span class="o">=</span><span class="n">elemA</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">elemB</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">valB</span><span class="o">=</span><span class="n">elemB</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valA</span> <span class="o">!=</span> <span class="n">valB</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>

            <span class="n">elemA_Id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemAttrib</span><span class="p">(</span><span class="n">elemA</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>
            <span class="n">elemB_Id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemAttrib</span><span class="p">(</span><span class="n">elemB</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>

            <span class="n">elemA_attrib</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">elemA</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>
            <span class="n">elemB_attrib</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">elemB</span><span class="o">.</span><span class="n">attrib</span><span class="p">)</span>

            <span class="c1"># remove ID from attrib</span>
            <span class="k">del</span> <span class="n">elemA_attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">elemB_attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

            <span class="c1"># remove trailinq zeros of any numbers in the attributes</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">elemA_attrib</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">elemA_attrib</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\.0+\b&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">elemB_attrib</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">elemB_attrib</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\.0+\b&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

            <span class="c1">#print(elemA_attrib)</span>
            <span class="c1">#print(elemB_attrib)</span>

            <span class="k">if</span> <span class="n">elemA_attrib</span> <span class="o">!=</span> <span class="n">elemB_attrib</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>

            <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="n">checkEquality</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">)</span> <span class="k">for</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">elemA</span><span class="p">,</span> <span class="n">elemB</span><span class="p">))</span>


        <span class="k">for</span> <span class="n">eRef</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDefinitions</span><span class="p">()</span><span class="o">.</span><span class="n">iterchildren</span><span class="p">(</span><span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;marker&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)):</span>
            <span class="n">idRef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemAttrib</span><span class="p">(</span><span class="n">eRef</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDefinitions</span><span class="p">()</span><span class="o">.</span><span class="n">iterchildren</span><span class="p">(</span><span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;marker&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)):</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemAttrib</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">idRef</span> <span class="o">!=</span> <span class="nb">id</span><span class="p">:</span>
                    <span class="n">isEqual</span> <span class="o">=</span> <span class="n">checkEquality</span><span class="p">(</span><span class="n">eRef</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">isEqual</span><span class="p">:</span>
                        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">] and [</span><span class="si">%s</span><span class="s1">] are equal!&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">idRef</span> <span class="p">,</span> <span class="nb">id</span><span class="p">)</span> <span class="p">)</span>
                        <span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemFromXpath</span><span class="p">(</span><span class="s1">&#39;/svg:svg&#39;</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
                            <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">tag</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;defs&#39;</span><span class="p">,</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;defs&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)]):</span>
                                <span class="k">try</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">id</span><span class="p">:</span>
                                        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">elem</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                                            <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;url(#</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="nb">id</span><span class="p">,</span> <span class="s1">&#39;url(#</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">idRef</span> <span class="p">)</span>
                                <span class="k">except</span><span class="p">:</span>
                                    <span class="k">pass</span></div>






    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.unifyDefs">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.unifyDefs">[docs]</a>
    <span class="k">def</span> <span class="nf">unifyDefs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ungroupChild</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Unify all &lt;defs&gt; nodes in a single &lt;defs&gt; node.</span>

<span class="sd">        :param ungroupChild: if any entry is a group, removes the group. (Default: False)</span>
<span class="sd">        :type ungroupChild: bool</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: -</span>

<span class="sd">        .. warning:: This function does not check whether the ids are unique!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemFromXpath</span><span class="p">(</span><span class="s1">&#39;/svg:svg&#39;</span><span class="p">)</span>
        <span class="n">mainDef</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDefinitions</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;.//svg:defs&#39;</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">inkex</span><span class="o">.</span><span class="n">NSS</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">!=</span> <span class="n">mainDef</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                    <span class="n">mainDef</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">ungroupChild</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">child</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;g&#39;</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">ungroup</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                <span class="n">d</span><span class="o">.</span><span class="n">getparent</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getDefsByTag">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getDefsByTag">[docs]</a>
    <span class="k">def</span> <span class="nf">getDefsByTag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;marker&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Return a list of elements in &lt;defs&gt; of a given a tag.</span>

<span class="sd">        :param tag: tag of the element</span>
<span class="sd">        :type tag: string</span>

<span class="sd">        :returns: a list with the def elements</span>
<span class="sd">        :rtype: list of inkscape elements</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDefinitions</span><span class="p">()</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;.//svg:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">tag</span><span class="p">,</span> <span class="n">namespaces</span><span class="o">=</span><span class="n">inkex</span><span class="o">.</span><span class="n">NSS</span><span class="p">)</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getDefsById">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getDefsById">[docs]</a>
    <span class="k">def</span> <span class="nf">getDefsById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="nb">id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Return a list of elements in &lt;defs&gt; of a given (part of) id</span>

<span class="sd">        :param id: (part of the id of the element)</span>
<span class="sd">        :type tag: string</span>

<span class="sd">        :returns: a list with the def elements</span>
<span class="sd">        :rtype: list of inkscape elements</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDefinitions</span><span class="p">()</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;./*[contains(@id,&quot;</span><span class="si">%s</span><span class="s1">&quot;)]&#39;</span> <span class="o">%</span> <span class="nb">id</span><span class="p">)</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getElemFromXpath">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getElemFromXpath">[docs]</a>
    <span class="k">def</span> <span class="nf">getElemFromXpath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xpath</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Return the element from the xml, given its xpath</span>

<span class="sd">        :param xpath: xpath of the element to be searched</span>
<span class="sd">        :type xpath: string</span>
<span class="sd">        :returns: inkscape element object</span>
<span class="sd">        :rtype: inkscape element object</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; name = self.getElemFromXpath(&#39;/svg:svg//svg:defs&#39;)   # returns the list of definitions of the document</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">getElement</span><span class="p">(</span><span class="n">xpath</span><span class="p">)</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getElemAttrib">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getElemAttrib">[docs]</a>
    <span class="k">def</span> <span class="nf">getElemAttrib</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">attribName</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Return the atribute of one element, given the atribute name</span>

<span class="sd">        :param elem: element under consideration</span>
<span class="sd">        :param attribName: attribute to be searched. Format:  namespace:attrName</span>
<span class="sd">        :type elem: inkscape element object</span>
<span class="sd">        :type attribName: string</span>
<span class="sd">        :returns: attribute</span>
<span class="sd">        :rtype: string</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; elem= self.getElemFromXpath(&#39;/svg:svg&#39;)               # first get the element. In this example, the entire document</span>
<span class="sd">        &gt;&gt;&gt; docNAme = self.getElemAttrib(elem,&#39;sodipodi:docname&#39;) # now get the name of the document, an attribute of svg:svg</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># splits namespace and attrib name</span>
        <span class="n">atribList</span> <span class="o">=</span> <span class="n">attribName</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">atribList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># if has no namespace</span>
            <span class="n">attrib</span> <span class="o">=</span> <span class="n">attribName</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># if has namespace</span>
            <span class="n">namespace</span> <span class="o">=</span> <span class="n">inkex</span><span class="o">.</span><span class="n">NSS</span><span class="p">[</span><span class="n">atribList</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">attrib</span> <span class="o">=</span> <span class="s1">&#39;{</span><span class="si">%s</span><span class="s1">}&#39;</span> <span class="o">%</span> <span class="n">namespace</span> <span class="o">+</span> <span class="n">atribList</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="n">attrib</span><span class="p">]</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getDocumentScaleFactor">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getDocumentScaleFactor">[docs]</a>
    <span class="k">def</span> <span class="nf">getDocumentScaleFactor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the scale factor of the document.</span>

<span class="sd">        The scale factor is defined as</span>

<span class="sd">        .. math:: S=\\frac{\\text{document width}}{\\text{viewbox width}}</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; scale = self.getDocumentScaleFactor()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemFromXpath</span><span class="p">(</span><span class="s1">&#39;/svg:svg&#39;</span><span class="p">)</span>
            <span class="n">width</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getElemAttrib</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">documentUnit</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>

            <span class="n">viewBox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemFromXpath</span><span class="p">(</span><span class="s1">&#39;/svg:svg&#39;</span><span class="p">)</span>
            <span class="n">viewBox_width</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getElemAttrib</span><span class="p">(</span><span class="n">viewBox</span><span class="p">,</span> <span class="s1">&#39;viewBox&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">])</span>

            <span class="n">doc_scale</span> <span class="o">=</span> <span class="n">viewBox_width</span> <span class="o">/</span> <span class="n">width</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">doc_scale</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="k">return</span> <span class="n">doc_scale</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getDocumentName">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getDocumentName">[docs]</a>
    <span class="k">def</span> <span class="nf">getDocumentName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the name of the document</span>
<span class="sd">        </span>
<span class="sd">        :returns: fileName</span>
<span class="sd">        :rtype: string</span>
<span class="sd">        </span>
<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; name = self.getDocumentName()</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemFromXpath</span><span class="p">(</span><span class="s1">&#39;/svg:svg&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemAttrib</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="s1">&#39;sodipodi:docname&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">fileName</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getDocumentUnit">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getDocumentUnit">[docs]</a>
    <span class="k">def</span> <span class="nf">getDocumentUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the unit of the document</span>
<span class="sd">        </span>
<span class="sd">        :returns: unit string code. See table below</span>
<span class="sd">        :rtype: string</span>
<span class="sd">        </span>
<span class="sd">        **Units**</span>
<span class="sd">        </span>
<span class="sd">        The list of available units are:</span>
<span class="sd">        </span>
<span class="sd">        ==================   ============   =============</span>
<span class="sd">        Name                 string code    relation</span>
<span class="sd">        ==================   ============   =============</span>
<span class="sd">        millimetre           mm             1in = 25.4mm</span>
<span class="sd">        centimetre           cm             1cm = 10mm</span>
<span class="sd">        metre                m              1m = 100cm</span>
<span class="sd">        kilometre            km             1km = 1000m</span>
<span class="sd">        inch                 in             1in = 96px</span>
<span class="sd">        foot                 ft             1ft = 12in</span>
<span class="sd">        yard                 yd             1yd = 3ft</span>
<span class="sd">        point                pt             1in = 72pt</span>
<span class="sd">        pixel                px             </span>
<span class="sd">        pica                 pc             1in = 6pc</span>
<span class="sd">        ==================   ============   =============</span>
<span class="sd">        </span>
<span class="sd">        **Example**</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; docunit = self.getDocumentUnit()    #returns &#39;cm&#39;, &#39;mm&#39;, etc.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">elem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemFromXpath</span><span class="p">(</span><span class="s1">&#39;/svg:svg/sodipodi:namedview&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemAttrib</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="s1">&#39;inkscape:document-units&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="s1">&#39;px&#39;</span>
        <span class="k">return</span> <span class="n">unit</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getcurrentLayer">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getcurrentLayer">[docs]</a>
    <span class="k">def</span> <span class="nf">getcurrentLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the current layer of the document</span>
<span class="sd">        </span>
<span class="sd">        :returns: Name of the current layer</span>
<span class="sd">        :rtype: string</span>
<span class="sd">        </span>
<span class="sd">        **Example**</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; name = self.getcurrentLayer()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">get_current_layer</span><span class="p">()</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.abs2relPath">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.abs2relPath">[docs]</a>
    <span class="k">def</span> <span class="nf">abs2relPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="n">abspath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemAttrib</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s1">&#39;sodipodi:absref&#39;</span><span class="p">)</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">abspath</span><span class="p">)</span>

        <span class="c1"># removes sodipodi:absref attribute</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="n">inkex</span><span class="o">.</span><span class="n">NSS</span><span class="p">[</span><span class="s1">&#39;sodipodi&#39;</span><span class="p">]</span>
        <span class="n">attrib</span> <span class="o">=</span> <span class="s1">&#39;{</span><span class="si">%s</span><span class="s1">}&#39;</span> <span class="o">%</span> <span class="n">namespace</span> <span class="o">+</span> <span class="s1">&#39;absref&#39;</span>

        <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">attrib</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># adds sodipodi:relref</span>
        <span class="n">attrib</span> <span class="o">=</span> <span class="s1">&#39;{</span><span class="si">%s</span><span class="s1">}&#39;</span> <span class="o">%</span> <span class="n">namespace</span> <span class="o">+</span> <span class="s1">&#39;relref&#39;</span>
        <span class="n">element</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">attrib</span><span class="p">,</span> <span class="n">fileName</span><span class="p">)</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.unit2userUnit">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.unit2userUnit">[docs]</a>
    <span class="k">def</span> <span class="nf">unit2userUnit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">unit_in</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a value from given unit to inkscape&#39;s default unit (px)</span>

<span class="sd">        :param value: value to be converted</span>
<span class="sd">        :param unit_in: input unit string code. See table below</span>
<span class="sd">        :type value: float</span>
<span class="sd">        :type unit_in: string</span>
<span class="sd">        :returns: converted value</span>
<span class="sd">        :rtype: float</span>
<span class="sd">        </span>
<span class="sd">        **Units**</span>
<span class="sd">        </span>
<span class="sd">        The list of available units are:</span>
<span class="sd">        </span>
<span class="sd">        ==================   ============   =============</span>
<span class="sd">        Name                 string code    relation</span>
<span class="sd">        ==================   ============   =============</span>
<span class="sd">        millimetre           mm             1in = 25.4mm</span>
<span class="sd">        centimetre           cm             1cm = 10mm</span>
<span class="sd">        metre                m              1m = 100cm</span>
<span class="sd">        kilometre            km             1km = 1000m</span>
<span class="sd">        inch                 in             1in = 96px</span>
<span class="sd">        foot                 ft             1ft = 12in</span>
<span class="sd">        yard                 yd             1yd = 3ft</span>
<span class="sd">        point                pt             1in = 72pt</span>
<span class="sd">        pixel                px             </span>
<span class="sd">        pica                 pc             1in = 6pc</span>
<span class="sd">        ==================   ============   =============</span>

<span class="sd">        **Example**</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; x_cm = 5.0</span>
<span class="sd">        &gt;&gt;&gt; x_px = self.unit2userUnit(x_cm,&#39;cm&#39;)       # converts  5.0cm -&gt; 188.97px</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">value</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">unitsDict</span><span class="p">[</span><span class="n">unit_in</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.userUnit2unit">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.userUnit2unit">[docs]</a>
    <span class="k">def</span> <span class="nf">userUnit2unit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">unit_out</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a value from inkscape&#39;s default unit (px) to specified unit</span>
<span class="sd">        </span>
<span class="sd">        :param value: value to be converted</span>
<span class="sd">        :param unit_out: output unit string code. See table below</span>
<span class="sd">        :type value: float</span>
<span class="sd">        :type unit_out: string</span>
<span class="sd">        :returns: converted value</span>
<span class="sd">        :rtype: float</span>
<span class="sd">        </span>
<span class="sd">        **Units**</span>
<span class="sd">        </span>
<span class="sd">        The list of available units are:</span>
<span class="sd">        </span>
<span class="sd">        ==================   ============   =============</span>
<span class="sd">        Name                 string code    relation</span>
<span class="sd">        ==================   ============   =============</span>
<span class="sd">        millimetre           mm             1in = 25.4mm</span>
<span class="sd">        centimetre           cm             1cm = 10mm</span>
<span class="sd">        metre                m              1m = 100cm</span>
<span class="sd">        kilometre            km             1km = 1000m</span>
<span class="sd">        inch                 in             1in = 96px</span>
<span class="sd">        foot                 ft             1ft = 12in</span>
<span class="sd">        yard                 yd             1yd = 3ft</span>
<span class="sd">        point                pt             1in = 72pt</span>
<span class="sd">        pixel                px             </span>
<span class="sd">        pica                 pc             1in = 6pc</span>
<span class="sd">        ==================   ============   =============</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; x_px = 5.0</span>
<span class="sd">        &gt;&gt;&gt; x_cm = self.userUnit2unit(x_px,&#39;cm&#39;)       # converts  5.0px -&gt; 0.1322cm</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unitsDict</span><span class="p">[</span><span class="n">unit_out</span><span class="o">.</span><span class="n">lower</span><span class="p">()])</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.unit2unit">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.unit2unit">[docs]</a>
    <span class="k">def</span> <span class="nf">unit2unit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">unit_in</span><span class="p">,</span> <span class="n">unit_out</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert a value from one unit to another unit</span>
<span class="sd">        </span>
<span class="sd">        :param value: value to be converted</span>
<span class="sd">        :param unit_in: input unit string code. See table below</span>
<span class="sd">        :param unit_out: output unit string code. See table below</span>
<span class="sd">        :type value: float</span>
<span class="sd">        :type unit_in: string</span>
<span class="sd">        :type unit_out: string</span>
<span class="sd">        :returns: converted value</span>
<span class="sd">        :rtype: float</span>
<span class="sd">        </span>
<span class="sd">        **Units**</span>
<span class="sd">        </span>
<span class="sd">        The list of available units are:</span>
<span class="sd">        </span>
<span class="sd">        ==================   ============   =============</span>
<span class="sd">        Name                 string code    relation</span>
<span class="sd">        ==================   ============   =============</span>
<span class="sd">        millimetre           mm             1in = 25.4mm</span>
<span class="sd">        centimetre           cm             1cm = 10mm</span>
<span class="sd">        metre                m              1m = 100cm</span>
<span class="sd">        kilometre            km             1km = 1000m</span>
<span class="sd">        inch                 in             1in = 96px</span>
<span class="sd">        foot                 ft             1ft = 12in</span>
<span class="sd">        yard                 yd             1yd = 3ft</span>
<span class="sd">        point                pt             1in = 72pt</span>
<span class="sd">        pixel                px             </span>
<span class="sd">        pica                 pc             1in = 6pc</span>
<span class="sd">        ==================   ============   =============</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; x_in = 5.0</span>
<span class="sd">        &gt;&gt;&gt; x_cm = self.unit2unit(x_in,&#39;in&#39;,&#39;cm&#39;)       # converts  5.0in -&gt; 12.7cm</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">unitsDict</span><span class="p">[</span><span class="n">unit_in</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unitsDict</span><span class="p">[</span><span class="n">unit_out</span><span class="o">.</span><span class="n">lower</span><span class="p">()])</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.createGroup">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.createGroup">[docs]</a>
    <span class="k">def</span> <span class="nf">createGroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new empty group of elements.</span>

<span class="sd">        This function creates a new empty group of elements. To create new elements inside this groups you must create them informing the group as the parent element.</span>

<span class="sd">        :param parent: parent object of the group. It can be another group or the root element</span>
<span class="sd">        :param label: label of the group. Default:  ``None``.</span>
<span class="sd">                      The label does not have to be unique</span>
<span class="sd">        :type parent: inkscape element object</span>
<span class="sd">        :type label: string</span>
<span class="sd">        :returns: the group object</span>
<span class="sd">        :rtype: group element</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                              # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; groupA = self.createGroup(rootLayer,label=&#39;temp&#39;)                # creates a group inside rootLayer</span>
<span class="sd">        &gt;&gt;&gt; groupB = self.createGroup(groupA,label=&#39;child&#39;)                  # creates a group inside groupA</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(groupA, [[10,0]],[0,0])       # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; line2 = inkDraw.line.relCoords(groupB, [[20,0]],[0,0])       # creates a line in groupB</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">g_attribs</span> <span class="o">=</span> <span class="p">{</span><span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;inkscape&#39;</span><span class="p">):</span> <span class="n">label</span><span class="p">}</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">g_attribs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">group</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.ungroup">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.ungroup">[docs]</a>
    <span class="k">def</span> <span class="nf">ungroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ungroup elements</span>

<span class="sd">        The new parent element of the ungrouped elements will be the parent of the removed group. See example below</span>

<span class="sd">        :param group: group to be removed</span>
<span class="sd">        :type group: group element</span>
<span class="sd">        :returns: list of the elements previously contained in the group</span>
<span class="sd">        :rtype: list of inkscape object elements</span>

<span class="sd">        **Example**</span>


<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                          # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; groupA = self.createGroup(rootLayer,label=&#39;temp&#39;)            # creates a group inside rootLayer</span>
<span class="sd">        &gt;&gt;&gt; groupB = self.createGroup(groupA,label=&#39;temp&#39;)               # creates a group inside groupA</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(groupA, [[10,0]],[0,0])       # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; line2 = inkDraw.line.relCoords(groupB, [[20,0]],[0,0])       # creates a line in groupB</span>
<span class="sd">        &gt;&gt;&gt; line3 = inkDraw.line.relCoords(groupB, [[30,0]],[0,0])       # creates a line in groupB</span>
<span class="sd">        &gt;&gt;&gt;  # at this point, the file struct is:   rootLayer[groupA[ line1, groupB[ line2, line3 ] ]]</span>
<span class="sd">        &gt;&gt;&gt; elemList = self.ungroup(groupB)                              # ungroup line2 and line3. elemList is a list containing line2 and line3 elements.</span>
<span class="sd">        &gt;&gt;&gt;  # now the file struct is:   rootLayer[groupA[ line1, line2, line3 ]]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">group</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;g&#39;</span> <span class="ow">or</span> <span class="n">group</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">):</span>  <span class="c1"># if object is a group</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">getparent</span><span class="p">()</span>

            <span class="n">listElem</span><span class="o">=</span><span class="p">[]</span>
            <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">group</span><span class="p">:</span>
                    <span class="n">parent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                    <span class="n">listElem</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">removeElement</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">listElem</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getTransformMatrix">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getTransformMatrix">[docs]</a>
    <span class="k">def</span> <span class="nf">getTransformMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the transformation attribute of the given element and the resulting 3x3 transformation matrix (numpy Array)</span>

<span class="sd">        This function is used to extract the transformation operator of a given element.</span>

<span class="sd">        :param element: element object with the transformation matrix</span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :returns: list [transfAttrib, transfMatrix]</span>

<span class="sd">          - transfAttrib: string containing all transformations as it is in the file</span>
<span class="sd">          - transfMatrix: numpy array with the resulting 3x3 transformation matrix</span>
<span class="sd">        :rtype: tuple</span>

<span class="sd">        .. note :: If the element does not have any transformation attribute, this function returns:</span>
<span class="sd">           - transfAttrib=&#39;&#39;  (empty string)</span>
<span class="sd">           - transfMatrix= 3x3 identity matrix</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">transfAttrib</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">transfMatrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;transform&#39;</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">:</span>
            <span class="n">transfAttrib</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;transform&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">transfAttrib</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">transfAttrib</span><span class="p">,</span> <span class="n">transfMatrix</span>

        <span class="c1"># split operation into several strings</span>
        <span class="n">listOperations</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">transfAttrib</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">e</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="n">listOperations</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;translate&#39;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;translate\((.*?\S)\)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">operation</span><span class="o">.</span><span class="n">lstrip</span><span class="p">())</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>  <span class="c1"># retrieves x and y values</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
                <span class="n">transfMatrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">transfMatrix</span><span class="p">,</span> <span class="n">mat</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;scale&#39;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;scale\((.*?\S)\)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">operation</span><span class="o">.</span><span class="n">lstrip</span><span class="p">())</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>  <span class="c1"># retrieves x and y values</span>
                <span class="n">scalex</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">scaley</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">scaley</span> <span class="o">=</span> <span class="n">scalex</span>
                <span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="n">scalex</span><span class="p">,</span> <span class="n">scaley</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
                <span class="n">transfMatrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">transfMatrix</span><span class="p">,</span> <span class="n">mat</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;rotate&#39;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;rotate\((.*?\S)\)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">operation</span><span class="o">.</span><span class="n">lstrip</span><span class="p">())</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>  <span class="c1"># retrieves x and y values</span>
                <span class="n">angleRad</span> <span class="o">=</span> <span class="o">-</span><span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">180.0</span>  <span class="c1"># negative angle because inkscape is upside down =(</span>
                <span class="n">matRot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angleRad</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angleRad</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angleRad</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angleRad</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># must translate before and after rotation</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                    <span class="n">matBefore</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>  <span class="c1"># translation before rotation</span>
                    <span class="n">matAfter</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>  <span class="c1"># translation after rotation</span>
                    <span class="n">matRot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">matBefore</span><span class="p">,</span> <span class="n">matRot</span><span class="p">)</span>
                    <span class="n">matRot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">matRot</span><span class="p">,</span> <span class="n">matAfter</span><span class="p">)</span>

                <span class="n">transfMatrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">transfMatrix</span><span class="p">,</span> <span class="n">matRot</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;skewX&#39;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;skewX\((.*?\S)\)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">operation</span><span class="o">.</span><span class="n">lstrip</span><span class="p">())</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>  <span class="c1"># retrieves x and y values</span>
                <span class="n">angleRad</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">180.0</span>
                <span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">angleRad</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
                <span class="n">transfMatrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">transfMatrix</span><span class="p">,</span> <span class="n">mat</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;skewY&#39;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;skewY\((.*?\S)\)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">operation</span><span class="o">.</span><span class="n">lstrip</span><span class="p">())</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>  <span class="c1"># retrieves x and y values</span>
                <span class="n">angleRad</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">180.0</span>
                <span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">angleRad</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
                <span class="n">transfMatrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">transfMatrix</span><span class="p">,</span> <span class="n">mat</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;matrix&#39;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;matrix\((.*?\S)\)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">operation</span><span class="o">.</span><span class="n">lstrip</span><span class="p">())</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>  <span class="c1"># retrieves x and y values</span>
                <span class="n">a</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">b</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">c</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                <span class="n">d</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                <span class="n">e</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
                <span class="n">f</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                <span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">e</span><span class="p">],</span> <span class="p">[</span><span class="n">b</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
                <span class="n">transfMatrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">transfMatrix</span><span class="p">,</span> <span class="n">mat</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">transfAttrib</span><span class="p">,</span> <span class="n">transfMatrix</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.rotateElement">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.rotateElement">[docs]</a>
    <span class="k">def</span> <span class="nf">rotateElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">angleDeg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;apply a rotation to the element using the transformation matrix attribute.</span>

<span class="sd">        It is possible to rotate isolated elements or groups.</span>

<span class="sd">        :param element: element object to be rotated</span>
<span class="sd">        :param center: center point of rotation</span>
<span class="sd">        :param angleDeg: angle of rotation in degrees, counter-clockwise direction</span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :type center: list</span>
<span class="sd">        :type angleDeg: float</span>
<span class="sd">        :returns:  nothing</span>
<span class="sd">        :rtype: -</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                              # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; groupA = self.createGroup(rootLayer,label=&#39;temp&#39;)                # creates a group inside rootLayer</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(groupA, [[5,0]],[0,0])       # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; line2 = inkDraw.line.relCoords(rootLayer, [[5,0]],[0,0])    # creates a line in rootLayer</span>
<span class="sd">        &gt;&gt;&gt; self.rotateElement(line2,[0,0],120)                              # rotates line2 120 degrees around center x=0,y=0</span>
<span class="sd">        &gt;&gt;&gt; self.rotateElement(groupA,[1,1],-90)                             # rotates groupA -90 degrees around center x=1,y=1</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transfString</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="n">angleDeg</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="s1">&#39;transform&#39;</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">:</span>
            <span class="n">transfString</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;transform&#39;</span><span class="p">]</span>

        <span class="c1"># if transform attribute is present, we must add the new rotation</span>
        <span class="k">if</span> <span class="n">transfString</span><span class="p">:</span>
            <span class="n">newTransform</span> <span class="o">=</span> <span class="s1">&#39;rotate(</span><span class="si">%f</span><span class="s1"> </span><span class="si">%f</span><span class="s1"> </span><span class="si">%f</span><span class="s1">) </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="o">-</span><span class="n">angleDeg</span><span class="p">,</span> <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">transfString</span><span class="p">)</span>  <span class="c1"># negative angle bc inkscape is upside down</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># if no transform attribute was found</span>
            <span class="n">newTransform</span> <span class="o">=</span> <span class="s1">&#39;rotate(</span><span class="si">%f</span><span class="s1"> </span><span class="si">%f</span><span class="s1"> </span><span class="si">%f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="o">-</span><span class="n">angleDeg</span><span class="p">,</span> <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># negative angle bc inkscape is upside down</span>

        <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;transform&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newTransform</span></div>


<div class="viewcode-block" id="inkscapeMadeEasy.copyElement">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.copyElement">[docs]</a>
    <span class="k">def</span> <span class="nf">copyElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">newParent</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">angleDeg</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Copy one element to the same parent or other parent group.</span>

<span class="sd">        It is possible to copy elements isolated or entire groups.</span>

<span class="sd">        :param element: element object to be copied</span>
<span class="sd">        :param newParent: New parent object. Can be another group or the same group</span>
<span class="sd">        :param distance: moving distance of the new copy. The coordinates are relative to the original position. If ``None``, then the copy is placed at the same position</span>
<span class="sd">        :param angleDeg: angle of rotation in degrees, counter-clockwise direction</span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :type newParent: inkscape element object</span>
<span class="sd">        :type distance: list</span>
<span class="sd">        :type angleDeg: float</span>
<span class="sd">        :returns:  new element</span>
<span class="sd">        :rtype: inkscape element object</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                              # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; groupA = self.createGroup(rootLayer,label=&#39;temp&#39;)                # creates a group inside rootLayer</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(groupA, [[5,0]],[0,0])            # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; line2 = inkDraw.line.relCoords(rootLayer, [[5,0]],[0,0])         # creates a line in rootLayer</span>
<span class="sd">        &gt;&gt;&gt; self.copyElement(line2,groupA)                                   # create a copy of line2 in groupA</span>
<span class="sd">        &gt;&gt;&gt; self.moveElement(groupA,[10,-10])                                # moves line2  DeltaX=10, DdeltaY=-10</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">newElem</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="n">newParent</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newElem</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">distance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">moveElement</span><span class="p">(</span><span class="n">newElem</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">angleDeg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rotateElement</span><span class="p">(</span><span class="n">newElem</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCenter</span><span class="p">(</span><span class="n">newElem</span><span class="p">),</span> <span class="n">angleDeg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">newElem</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.moveElement">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.moveElement">[docs]</a>
    <span class="k">def</span> <span class="nf">moveElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Move the element using the transformation attribute.</span>

<span class="sd">        It is possible to move elements isolated or entire groups.</span>

<span class="sd">        :param element: element object to be moved</span>
<span class="sd">        :param distance: moving distance. The coordinates are relative to the original position.</span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :type distance: tuple</span>
<span class="sd">        :returns:  nothing</span>
<span class="sd">        :rtype: -</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                              # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; groupA = self.createGroup(rootLayer,label=&#39;temp&#39;)                # creates a group inside rootLayer</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(groupA, [[5,0]],[0,0])       # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; line2 = inkDraw.line.relCoords(rootLayer, [[5,0]],[0,0])    # creates a line in rootLayer</span>
<span class="sd">        &gt;&gt;&gt; self.moveElement(line2,[10,10])                                  # moves line2  DeltaX=10, DdeltaY=10</span>
<span class="sd">        &gt;&gt;&gt; self.moveElement(groupA,[10,-10])                                # moves line2  DeltaX=10, DdeltaY=-10</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">distance</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">distance</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">transfString</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="s1">&#39;transform&#39;</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">:</span>
            <span class="n">transfString</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;transform&#39;</span><span class="p">]</span>

        <span class="c1"># if transform attribute is present, we must add the new translation</span>
        <span class="k">if</span> <span class="n">transfString</span><span class="p">:</span>
            <span class="n">newTransform</span> <span class="o">=</span> <span class="s1">&#39;translate(</span><span class="si">%f</span><span class="s1"> </span><span class="si">%f</span><span class="s1">) </span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">distance</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">distance</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">transfString</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># if no transform attribute was found</span>
            <span class="n">newTransform</span> <span class="o">=</span> <span class="s1">&#39;translate(</span><span class="si">%f</span><span class="s1"> </span><span class="si">%f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">distance</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">distance</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;transform&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newTransform</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.scaleElement">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.scaleElement">[docs]</a>
    <span class="k">def</span> <span class="nf">scaleElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">scaleX</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">scaleY</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Scale the element using the transformation attribute.</span>

<span class="sd">        It is possible to scale elements isolated or entire groups.</span>

<span class="sd">        :param element: element object to be scaled</span>
<span class="sd">        :param scaleX: scaling factor in X direction. Default=1.0</span>
<span class="sd">        :param scaleY: scaling factor in Y direction. Default=``None``. If scaleY=``None``, then scaleY=scaleX is assumed (default behavior)</span>
<span class="sd">        :param center: center point considered as the origin for the scaling. Default=``None``. If ``None``, the origin is adopted</span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :type scaleX: float</span>
<span class="sd">        :type scaleX: float</span>
<span class="sd">        :type center: list</span>
<span class="sd">        :returns:  nothing</span>
<span class="sd">        :rtype: -</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                              # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; groupA = self.createGroup(rootLayer,label=&#39;temp&#39;)                # creates a group inside rootLayer</span>
<span class="sd">        &gt;&gt;&gt; circ1 = centerRadius(groupA,centerPoint=[0,0],radius=1.0)        # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; circ2 = centerRadius(rootLayer,centerPoint=[0,0],radius=1.0)     # creates a line in rootLayer</span>
<span class="sd">        &gt;&gt;&gt; self.scaleElement(circ1,2.0)                                     # scales x2 in both X and Y directions</span>
<span class="sd">        &gt;&gt;&gt; self.scaleElement(circ1,2.0,3.0)                                 # scales x2 in X and x3 in Y</span>
<span class="sd">        &gt;&gt;&gt; self.scaleElement(groupA,0.5)                                    # scales x0.5 the group in both X and Y directions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">center</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">moveElement</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>

        <span class="n">transfString</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="s1">&#39;transform&#39;</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">:</span>
            <span class="n">transfString</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;transform&#39;</span><span class="p">]</span>

        <span class="c1"># if transform attribute is present, we must add the new translation</span>
        <span class="k">if</span> <span class="n">transfString</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">scaleY</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">newTransform</span> <span class="o">=</span> <span class="s1">&#39;scale(</span><span class="si">%f</span><span class="s1"> </span><span class="si">%f</span><span class="s1">) </span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">scaleX</span><span class="p">,</span> <span class="n">scaleY</span><span class="p">,</span> <span class="n">transfString</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">newTransform</span> <span class="o">=</span> <span class="s1">&#39;scale(</span><span class="si">%f</span><span class="s1">) </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">scaleX</span><span class="p">,</span> <span class="n">transfString</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># if no transform attribute was found</span>
            <span class="k">if</span> <span class="n">scaleY</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">newTransform</span> <span class="o">=</span> <span class="s1">&#39;scale(</span><span class="si">%f</span><span class="s1"> </span><span class="si">%f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">scaleX</span><span class="p">,</span> <span class="n">scaleY</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">newTransform</span> <span class="o">=</span> <span class="s1">&#39;scale(</span><span class="si">%f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">scaleX</span>

        <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;transform&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newTransform</span>

        <span class="k">if</span> <span class="n">center</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">moveElement</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="p">[</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.addAttribute">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.addAttribute">[docs]</a>
    <span class="k">def</span> <span class="nf">addAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">attributeName</span><span class="p">,</span> <span class="n">attributeValue</span><span class="p">,</span><span class="n">forceWrite</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a new attribute to the element. If the attribute already exists, forceWrite=True overwrites it. Otherwise the attribute is left unchanged.</span>

<span class="sd">        :param element: element object</span>
<span class="sd">        :param attributeName: attribute name</span>
<span class="sd">        :param attributeValue: attribute value</span>
<span class="sd">        :param forceWrite: force write if the attibute already exists</span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :type attributeName: string</span>
<span class="sd">        :type attributeValue: string</span>
<span class="sd">        :type forceWrite: bool</span>
<span class="sd">        :returns:  nothing</span>
<span class="sd">        :rtype: -</span>

<span class="sd">        **Example**</span>
<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                                   # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(rootLayer, [[5,0],[0,6]],[0,0])        # creates a line in groupA, using relative coordinates</span>
<span class="sd">        &gt;&gt;&gt; list = self.getPoints(line1)                                          # list = [[0.0, 0.0], [5.0, 0.0], [5.0, 6.0]]</span>

<span class="sd">         &gt;&gt;&gt; self.addAttribute(line1, attributeName=&#39;myInfo&#39;, attributeValue=&#39;my Data = %f&#39; %3.5, forceWrite=True) # add new attribute</span>
<span class="sd">         &gt;&gt;&gt; self.addAttribute(line1, attributeName=&#39;myInfo&#39;, attributeValue=&#39;my Data = %f&#39; %4.5, forceWrite=False) # does nothing. attribute already exists</span>
<span class="sd">         &gt;&gt;&gt; self.addAttribute(line1, attributeName=&#39;myInfo&#39;, attributeValue=&#39;my Data = %f&#39; %5.5, forceWrite=True) # overwrite attribute</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">forceWrite</span><span class="p">:</span>
            <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="n">attributeName</span><span class="p">]</span> <span class="o">=</span> <span class="n">attributeValue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">attributeName</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">element</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.findMarker">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.findMarker">[docs]</a>
    <span class="k">def</span> <span class="nf">findMarker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">markerName</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Search for markerName definition in the document.</span>

<span class="sd">        :param markerName: name of the marker</span>
<span class="sd">        :type markerName: string</span>
<span class="sd">        :returns: True if markerName is in the document. False otherwise</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">list</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDefsByTag</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;marker&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">markerName</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="kc">False</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getPoints">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getPoints">[docs]</a>
    <span class="k">def</span> <span class="nf">getPoints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list of points of the element.</span>

<span class="sd">        This function works on paths, texts, groups, uses, rects. In the case of a group, the function will include recursively all its components.</span>

<span class="sd">        :param element: element object</span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :returns: array of points</span>
<span class="sd">        :rtype: numpy array</span>

<span class="sd">        .. note:: This function will apply any transformation stored in transform attribute,</span>
<span class="sd">            that is, it will compute the resulting coordinates of each object</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                                   # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(rootLayer, [[5,0],[0,6]],[0,0])        # creates a line in groupA, using relative coordinates</span>
<span class="sd">        &gt;&gt;&gt; list = self.getPoints(line1)                                          # list = [[0.0, 0.0], [5.0, 0.0], [5.0, 6.0]]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># stores the list of coordinates</span>
        <span class="n">listCoords</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># check if element is valid. &#39;path&#39;, &#39;text&#39; and &#39;g&#39; are valid</span>
        <span class="n">accepted_strings</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">),</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">),</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">),</span> <span class="s1">&#39;use&#39;</span><span class="p">,</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;use&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">),</span><span class="s1">&#39;rect&#39;</span><span class="p">,</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;rect&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)])</span>
        <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">tag</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">accepted_strings</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;getPoints: Element type [ </span><span class="si">%s</span><span class="s1"> ] ignored...&#39;</span> <span class="o">%</span> <span class="n">element</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">listCoords</span>

        <span class="c1">#print(element.tag, element.attrib)</span>
        <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">tag</span> <span class="ow">in</span> <span class="p">[</span><span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">),</span> <span class="s1">&#39;path&#39;</span><span class="p">]:</span>  <span class="c1"># if object is path</span>

            <span class="c1"># adds special character between letters and splits. the first regular expression excludes e and E bc they are used to represent scientific notation  =S</span>
            <span class="n">dString</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;([a-df-zA-DF-Z])+?&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;#\1#&#39;</span><span class="p">,</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span>

            <span class="n">dString</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dString</span><span class="p">]</span>  <span class="c1"># removes leading spaces from strings</span>
            <span class="n">dString</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">dString</span><span class="p">))</span>  <span class="c1"># removes empty elements</span>
            <span class="n">Xcurrent</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">Ycurrent</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">dString</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">commandType</span> <span class="o">=</span> <span class="n">dString</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">argument</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dString</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()]</span>  <span class="c1"># extracts arguments from M command and converts to float</span>
                <span class="k">del</span> <span class="n">dString</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">dString</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">commandType</span> <span class="ow">in</span> <span class="s1">&#39;mMlLtT&#39;</span><span class="p">:</span>  <span class="c1"># extracts points from command &#39;move to&#39; M/m or &#39;line to&#39; l/L or &#39;smooth quadratic Bezier curveto&#39;t/T</span>
                    <span class="n">X</span> <span class="o">=</span> <span class="n">argument</span><span class="p">[</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># 2 parameters per segment, x is 1st</span>
                    <span class="n">Y</span> <span class="o">=</span> <span class="n">argument</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># 2 parameters per segment, y is 2nd</span>

                <span class="k">if</span> <span class="n">commandType</span> <span class="ow">in</span> <span class="s1">&#39;hH&#39;</span><span class="p">:</span>  <span class="c1"># extracts points from command &#39;horizontal line&#39; h/H</span>
                    <span class="n">X</span> <span class="o">=</span> <span class="n">argument</span>
                    <span class="n">Y</span> <span class="o">=</span> <span class="p">[</span><span class="n">Ycurrent</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">commandType</span> <span class="ow">in</span> <span class="s1">&#39;vV&#39;</span><span class="p">:</span>  <span class="c1"># extracts points from command &#39;vertical line&#39; v/V</span>
                    <span class="n">Y</span> <span class="o">=</span> <span class="n">argument</span>
                    <span class="n">X</span> <span class="o">=</span> <span class="p">[</span><span class="n">Xcurrent</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">commandType</span> <span class="ow">in</span> <span class="s1">&#39;cC&#39;</span><span class="p">:</span>  <span class="c1"># extracts points from command &#39;Bezier Curve&#39; c/C</span>
                    <span class="n">X</span> <span class="o">=</span> <span class="n">argument</span><span class="p">[</span><span class="mi">4</span><span class="p">::</span><span class="mi">6</span><span class="p">]</span>  <span class="c1"># 6 parameters per segment, x is 5th</span>
                    <span class="n">Y</span> <span class="o">=</span> <span class="n">argument</span><span class="p">[</span><span class="mi">5</span><span class="p">::</span><span class="mi">6</span><span class="p">]</span>  <span class="c1"># 6 parameters per segment, y is 6th</span>

                <span class="k">if</span> <span class="n">commandType</span> <span class="ow">in</span> <span class="s1">&#39;sSqQ&#39;</span><span class="p">:</span>  <span class="c1"># extracts points from command &#39;quadratic Bezier Curve&#39; q/Q or &#39;smooth curveto&#39; s/S</span>
                    <span class="n">X</span> <span class="o">=</span> <span class="n">argument</span><span class="p">[</span><span class="mi">2</span><span class="p">::</span><span class="mi">4</span><span class="p">]</span>  <span class="c1"># 4 parameters per segment, x is 3rd</span>
                    <span class="n">Y</span> <span class="o">=</span> <span class="n">argument</span><span class="p">[</span><span class="mi">3</span><span class="p">::</span><span class="mi">4</span><span class="p">]</span>  <span class="c1"># 4 parameters per segment, y is 4th</span>

                <span class="k">if</span> <span class="n">commandType</span> <span class="ow">in</span> <span class="s1">&#39;aA&#39;</span><span class="p">:</span>  <span class="c1"># extracts points from command &#39;arc&#39; a/A</span>
                    <span class="n">X</span> <span class="o">=</span> <span class="n">argument</span><span class="p">[</span><span class="mi">5</span><span class="p">::</span><span class="mi">7</span><span class="p">]</span>  <span class="c1"># 7 parameters per segment, x is 6th</span>
                    <span class="n">Y</span> <span class="o">=</span> <span class="n">argument</span><span class="p">[</span><span class="mi">6</span><span class="p">::</span><span class="mi">7</span><span class="p">]</span>  <span class="c1"># 7 parameters per segment, y is 7th</span>

                <span class="k">if</span> <span class="n">commandType</span> <span class="ow">in</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span>  <span class="c1"># if h</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)):</span>  <span class="c1"># convert to abs coordinates</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">Xcurrent</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">commandType</span> <span class="ow">in</span> <span class="s1">&#39;v&#39;</span><span class="p">:</span>  <span class="c1"># if v</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">Y</span><span class="p">)):</span>  <span class="c1"># convert to abs coordinates</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">Y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">Ycurrent</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">Y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">Y</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">commandType</span> <span class="ow">in</span> <span class="s1">&#39;mltcsqa&#39;</span><span class="p">:</span>  <span class="c1"># if m or l</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)):</span>  <span class="c1"># convert to abs coordinates</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">Xcurrent</span>
                            <span class="n">Y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">Ycurrent</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                            <span class="n">Y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">Y</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

                <span class="n">coords</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
                <span class="n">listCoords</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
                <span class="n">Xcurrent</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">Ycurrent</span> <span class="o">=</span> <span class="n">Y</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>


        <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">tag</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;rect&#39;</span><span class="p">,</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;rect&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)]:</span>  <span class="c1"># if object is a  rect</span>

            <span class="k">if</span> <span class="s1">&#39;x&#39;</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span> <span class="ow">and</span> <span class="s1">&#39;y&#39;</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">:</span>
                <span class="n">x0</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
                <span class="n">y0</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
                <span class="n">h</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">])</span>
                <span class="n">w</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">])</span>
                <span class="n">coords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">],[</span><span class="n">x0</span><span class="o">+</span><span class="n">w</span><span class="p">,</span> <span class="n">y0</span><span class="o">+</span><span class="n">h</span><span class="p">],[</span><span class="n">x0</span><span class="o">+</span><span class="n">w</span><span class="p">,</span> <span class="n">y0</span><span class="o">+</span><span class="n">h</span><span class="p">],[</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="o">+</span><span class="n">h</span><span class="p">]]</span>
                <span class="n">listCoords</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">tag</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)]:</span>  <span class="c1"># if object is a text</span>

            <span class="k">if</span> <span class="s1">&#39;x&#39;</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span> <span class="ow">and</span> <span class="s1">&#39;y&#39;</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
                <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
                <span class="n">coords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]]</span>
                <span class="n">listCoords</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">tag</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)]:</span>  <span class="c1"># if object is a group</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">iterchildren</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">obj</span> <span class="o">!=</span> <span class="n">element</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">tag</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span> <span class="s1">&#39;defs&#39;</span><span class="p">,</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;defs&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)]:</span>
                    <span class="n">listPoints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                    <span class="n">listCoords</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">listPoints</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">tag</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;use&#39;</span><span class="p">,</span> <span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;use&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">)]:</span>  <span class="c1"># if object is a use</span>
            <span class="n">listCoordsTemp</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">if</span> <span class="s1">&#39;x&#39;</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span><span class="o">=</span><span class="mi">0</span>

            <span class="k">if</span> <span class="s1">&#39;y&#39;</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">:</span>
                <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">y</span><span class="o">=</span><span class="mi">0</span>

            <span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getElemAttrib</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s1">&#39;xlink:href&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">elemLink</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">svg</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">elemLink</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">elemLink</span><span class="o">.</span><span class="n">iter</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">obj</span> <span class="o">!=</span> <span class="n">elemLink</span><span class="p">:</span>
                        <span class="n">listPoints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                        <span class="n">listCoordsTemp</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">listPoints</span><span class="p">)</span>

            <span class="c1">#apply translation</span>
            <span class="n">listCoords</span><span class="o">=</span><span class="p">[[</span><span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">x</span><span class="p">,</span><span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <span class="n">listCoordsTemp</span><span class="p">]</span>

        <span class="c1"># apply transformation</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">listCoords</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>

            <span class="c1"># creates numpy array with the points to be transformed</span>
            <span class="n">transfMat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTransformMatrix</span><span class="p">(</span><span class="n">element</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">coordsNP</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">listCoords</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">listCoords</span><span class="p">),</span> <span class="mi">1</span><span class="p">])))</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>

            <span class="n">coordsTransformed</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">transfMat</span><span class="p">,</span> <span class="n">coordsNP</span><span class="p">)</span>
            <span class="n">coordsTransformed</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">coordsTransformed</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>  <span class="c1"># remove last line, transposes and converts to list of lists</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">coordsTransformed</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>

        <span class="k">return</span> <span class="n">coordsTransformed</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getBoundingBox">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getBoundingBox">[docs]</a>
    <span class="k">def</span> <span class="nf">getBoundingBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the bounding Box of the element.</span>

<span class="sd">        This function works on paths, texts or groups. In the case of a group, the function will consider recursively all its components</span>

<span class="sd">        :param element: element object</span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :returns: two lists: [xMin,yMin] and [xMax,yMax]</span>
<span class="sd">        :rtype: list</span>

<span class="sd">        .. note:: This function will appply any transformation stored in transform attribute,</span>
<span class="sd">            that is, it will compute the resulting coordinates of each object</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                                   # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(rootLayer, [[5,0],[0,6]],[0,0])        # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; BboxMin,BboxMax = self.getBoundingBox(line1)                          # gets BboxMin = [0.0, 0.0] and BboxMax = [5.0, 6.0]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="n">coordsNP</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>

        <span class="n">bboxMax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">coordsNP</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">bboxMin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">coordsNP</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bboxMin</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">bboxMax</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span></div>


    <span class="c1"># ---------------------------------------------</span>
<div class="viewcode-block" id="inkscapeMadeEasy.getCenter">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getCenter">[docs]</a>
    <span class="k">def</span> <span class="nf">getCenter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the center coordinates of the bounding Box of the element.</span>

<span class="sd">        This function works on paths, texts or groups. In the case of a group, the function will consider recursively all its components</span>

<span class="sd">        :param element: element object</span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :returns: list: [xCenter, yCenter]</span>
<span class="sd">        :rtype: list</span>

<span class="sd">        .. note:: This function will apply any transformation stored in transform attribute,</span>
<span class="sd">            that is, it will compute the resulting coordinates of each object</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                                   # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.relCoords(rootLayer, [[5,0],[0,6]],[0,0])   # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; Center = self.getCenter(line1)                                        # gets Center = [2.5, 3.0]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">bboxMin</span><span class="p">,</span> <span class="n">bboxMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getBoundingBox</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

        <span class="n">bboxCenter</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="n">bboxMax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">bboxMin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">bboxMax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">bboxMin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">bboxCenter</span></div>


<div class="viewcode-block" id="inkscapeMadeEasy.getSegmentFromPoints">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getSegmentFromPoints">[docs]</a>
    <span class="k">def</span> <span class="nf">getSegmentFromPoints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pointList</span><span class="p">,</span> <span class="n">normalDirection</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Given two points of a straight line segment, returns the parameters of that segment:</span>
<span class="sd">        </span>
<span class="sd">        length, angle (in radians), tangent unitary vector and normal unitary vector</span>

<span class="sd">        :param pointList: start and end coordinates [ Pstart, Pend ]</span>
<span class="sd">        :param normalDirection:</span>
<span class="sd">        </span>
<span class="sd">          - &#39;R&#39;: normal vector points to the right of the tangent vector (Default)</span>
<span class="sd">          - &#39;L&#39;: normal vector points to the left of the tangent vector</span>
<span class="sd">          </span>
<span class="sd">        :type pointList: list of points</span>
<span class="sd">        :type normalDirection: string</span>
<span class="sd">    </span>
<span class="sd">        :returns: list: [length, theta, t_versor,n_versor]</span>
<span class="sd">        :rtype: list</span>
<span class="sd">        </span>
<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; segmentParam = getSegmentFromPoints([[1,1],[2,2]],&#39;R&#39;)                               # returns [1.4142, 0.78540, [0.7071,0.7071], [0.7071,-0.7071] ]</span>
<span class="sd">        &gt;&gt;&gt; segmentParam = getSegmentFromPoints([[1,1],[2,2]],&#39;L&#39;)                               # returns [1.4142, 0.78540, [0.7071,0.7071], [-0.7071,0.7071] ]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># tangent versor (pointing P2)</span>
        <span class="n">P1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pointList</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">P2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pointList</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">t_vector</span> <span class="o">=</span> <span class="n">P2</span> <span class="o">-</span> <span class="n">P1</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">t_vector</span><span class="p">)</span>
        <span class="n">t_versor</span> <span class="o">=</span> <span class="n">t_vector</span> <span class="o">/</span> <span class="n">length</span>

        <span class="c1"># normal vector: counter-clockwise with respect to tangent vector</span>
        <span class="k">if</span> <span class="n">normalDirection</span> <span class="ow">in</span> <span class="s1">&#39;rR&#39;</span><span class="p">:</span>
            <span class="n">n_versor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">t_versor</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">-</span><span class="n">t_versor</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">normalDirection</span> <span class="ow">in</span> <span class="s1">&#39;lL&#39;</span><span class="p">:</span>
            <span class="n">n_versor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="n">t_versor</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">t_versor</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>

        <span class="c1"># angle</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">t_versor</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">t_versor</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">length</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">t_versor</span><span class="p">,</span> <span class="n">n_versor</span><span class="p">]</span></div>


<div class="viewcode-block" id="inkscapeMadeEasy.getSegmentParameters">
<a class="viewcode-back" href="../moduleDefinitions.html#inkscapeMadeEasy_Base.inkscapeMadeEasy.getSegmentParameters">[docs]</a>
    <span class="k">def</span> <span class="nf">getSegmentParameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">normalDirection</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Given a path segment composed by only two points, returns the parameters of that segment:</span>
<span class="sd">        </span>
<span class="sd">        length, angle (in radians), start point, end point, tangent unitary vector and normal unitary vector</span>

<span class="sd">        This function works with paths only.</span>

<span class="sd">         - If the element is not a path, the function returns an empty list</span>
<span class="sd">         - If the path element has more than two points, the function returns an empty list</span>

<span class="sd">        :param element: path element object</span>
<span class="sd">        :param normalDirection:</span>
<span class="sd">        </span>
<span class="sd">          - &#39;R&#39;: normal vector points to the right of the tangent vector (Default)</span>
<span class="sd">          - &#39;L&#39;: normal vector points to the left of the tangent vector</span>
<span class="sd">          </span>
<span class="sd">        :type element: inkscape element object</span>
<span class="sd">        :type normalDirection: string</span>
<span class="sd">        </span>
<span class="sd">        :returns: list: [Pstart,Pend,length, theta, t_versor,n_versor]</span>
<span class="sd">        :rtype: list</span>

<span class="sd">        .. note:: This function will apply any transformation stored in transform attribute,</span>
<span class="sd">            that is, it will compute the resulting coordinates of each object</span>

<span class="sd">        **Example**</span>

<span class="sd">        &gt;&gt;&gt; rootLayer = self.document.getroot()                        # retrieves the root layer of the file</span>
<span class="sd">        &gt;&gt;&gt; line1 = inkDraw.line.absCoords(rootLayer, [[1,1],[2,2]])   # creates a line in groupA</span>
<span class="sd">        &gt;&gt;&gt; segementList = getSegmentParameters(line1,&#39;R&#39;)             # returns [[1,1], [2,2],1.4142, 0.78540,  [0.7071,0.7071], [0.7071,-0.7071] ]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># check if element is valid. &#39;path&#39;</span>
        <span class="n">accepted_strings</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">inkex</span><span class="o">.</span><span class="n">addNS</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;svg&#39;</span><span class="p">),</span> <span class="s1">&#39;path&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">tag</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">accepted_strings</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">listPoints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPoints</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">listPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># if the path has more than two points</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSegmentFromPoints</span><span class="p">(</span><span class="n">listPoints</span><span class="p">,</span> <span class="n">normalDirection</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">listPoints</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">listPoints</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">+</span> <span class="n">data</span></div>
</div>




</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016, fsmMLK.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>